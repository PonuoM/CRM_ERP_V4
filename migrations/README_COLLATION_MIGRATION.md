# Migration Scripts: Convert All Collations to utf8mb4_unicode_ci

## üìã ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á

1. **`20250201_convert_all_to_utf8mb4_unicode_ci_v2.php`** ‚≠ê **‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ä‡πâ**
   - PHP script ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á progress
   - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ errors ‡πÑ‡∏î‡πâ‡∏î‡∏µ
   - ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î

2. **`20250201_convert_all_to_utf8mb4_unicode_ci.sql`**
   - Pure SQL script (‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ñ‡πâ‡∏≤‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô)
   
3. **`verify_all_unicode_ci.php`**
   - Script ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ collation

## üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö Quick Start

```bash
# 1. Backup ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô!
mysqldump -u root -p mini_erp > backup_$(date +%Y%m%d).sql

# 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
php migrations/verify_all_unicode_ci.php

# 3. ‡∏£‡∏±‡∏ô migration
php migrations/20250201_convert_all_to_utf8mb4_unicode_ci_v2.php

# 4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
php migrations/verify_all_unicode_ci.php
```

## üìä ‡∏™‡∏£‡∏∏‡∏õ

- **‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ:** `utf8mb4_0900_ai_ci` = 158 columns (‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà), `utf8mb4_unicode_ci` = 95 columns (‡∏™‡πà‡∏ß‡∏ô‡∏ô‡πâ‡∏≠‡∏¢)
- **‡∏´‡∏•‡∏±‡∏á migration:** ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô `utf8mb4_unicode_ci`
- **‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ:** ‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 1-30 ‡∏ô‡∏≤‡∏ó‡∏µ)

## ‚ö†Ô∏è ‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô

- **‡∏ï‡πâ‡∏≠‡∏á BACKUP ‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏±‡∏ô!**
- ‡∏≠‡∏≤‡∏à‡∏°‡∏µ downtime ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß
- ‡∏õ‡∏¥‡∏î application ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á migration

## ‚úÖ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á

‡∏´‡∏•‡∏±‡∏á migration ‡πÄ‡∏™‡∏£‡πá‡∏à:
- ‚úÖ ‡∏ó‡∏∏‡∏Å table ‡πÉ‡∏ä‡πâ `utf8mb4_unicode_ci`
- ‚úÖ ‡∏ó‡∏∏‡∏Å column ‡πÉ‡∏ä‡πâ `utf8mb4_unicode_ci`
- ‚úÖ Foreign keys ‡∏ñ‡∏π‡∏Å recreate ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢
- ‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢

